<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://cyilin36.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://cyilin36.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://cyilin36.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://cyilin36.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://cyilin36.github.io/css/light.css' />
    <link rel="stylesheet" href='https://cyilin36.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://cyilin36.github.io/css/syntax.css' />
    <title>博客迁移记录 - cyilin&#39;s blog</title>
    
    <link rel="icon" type="image/x-icon" href='/images/favicon.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="https://cyilin36.github.io/css/light.css"><link rel="stylesheet" href="https://cyilin36.github.io/css/custom.css">
    

    
    <meta name="description"
  content="纪念我的在其中遇到的数个大坑" />
<meta name="keywords"
  content='' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://cyilin36.github.io/post/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="博客迁移记录 - cyilin&#39;s blog" />
<meta name="twitter:description"
  content="纪念我的在其中遇到的数个大坑" />
<meta name="twitter:site" content="https://cyilin36.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://cyilin36.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="博客迁移记录 - cyilin&#39;s blog">
<meta property="og:description"
  content="纪念我的在其中遇到的数个大坑" />
<meta property="og:url" content="https://cyilin36.github.io/post/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/" />
<meta property="og:site_name" content="博客迁移记录" />
<meta property="og:image"
  content="https://cyilin36.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-09-26 22:23:17 &#43;0800 CST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://cyilin36.github.io/">
        <img class="octicon" height="32" width="32" src="/images/avatar.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://cyilin36.github.io/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="/images/avatar.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://cyilin36.github.io/">
                  <img class=" avatar-user"
                    src="/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://cyilin36.github.io/">cyilin</a>
                  </span>
                  <span class="path-divider">/</span>
                  <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px">
                    <a href="https://cyilin36.github.io/post/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/">博客迁移记录</a>
                  </strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Fri, 26 Sep 2025 22:23:17 &#43;0800"
                    class="no-wrap">
                    Fri, 26 Sep 2025 22:23:17 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Sat, 27 Sep 2025 00:14:58 &#43;0800"
                    class="no-wrap">
                    Sat, 27 Sep 2025 00:14:58 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    
                    <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                      <svg aria-hidden="true" viewBox="0 0 16 16" height="16" width="16" class="octicon octicon-list-unordered">
                        <path fill-rule="evenodd" d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z"></path>
                      </svg>
                    </summary>
                    <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                      <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                        <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list">
                        </div>
                      </div>
                    </details-menu>
                      7747 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/blog">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      blog
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/%E6%96%87%E7%AB%A0">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      文章
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/%E8%AE%B0%E5%BD%95%E7%94%9F%E6%B4%BB">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      记录生活
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/hugo">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      hugo
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5" style="z-index: 1">
                <article class="markdown-body entry-content container-lg"><h1 id="前言">前言</h1>
<p>最近花了将博客从<a href="(https://docs.tangly1024.com/about)"><strong>notionnext</strong></a>转移到<a href="https://gohugo.io/"><strong>hugo</strong></a>。</p>
<p>转移的理由有以下：</p>
<ol>
<li>notionnext需要在notion上写作，但众所周知，由于GFW的存在，写作体验不能说良好，不如本地</li>
<li>notionnext是依靠notion的api获取数据库的内容再进行渲染，而之前就因为接口更改、个人没能及时更新仓库的原因导致图片无法加载出来，一度以为个人是notion上的图片都炸了。</li>
<li>hugo有这非常活跃的社区，且主题非常多，涵盖面非常更广；notionnext虽然也有非常多的主题，但还是比不上hugo的社区丰富。</li>
<li>自用的obsidian和notion有一小部分的语法冲突。</li>
<li><del>纯粹就是闲到蛋疼。</del></li>
</ol>
<p>综上所述，为了摆脱对我而言不怎么便利notion写作和较为丰富的社区主题，便是我从notionnext迁移到hugo的原因。</p>
<p>那么接下来讲述的目标就很清晰了：</p>
<ul>
<li>部署<strong>hugo博客</strong>。</li>
<li>将文章从<strong>notionnext</strong>转移到<strong>hugo</strong>。</li>
</ul>
<hr>
<h1 id="部署hugo博客">部署hugo博客</h1>
<p>我们分以下三步来进行hugo博客的部署：</p>
<ol>
<li>理解hugo的工作原理。</li>
<li>安装hugo。</li>
<li>将博客运转在服务器上。</li>
</ol>
<h2 id="hugo的本质">hugo的本质</h2>
<p>想要真正部署好hugo，首先需要知道hugo到底是什么。</p>
<p>hugo和notionnext一样，<strong>本质上都是一个静态网页生成器</strong>。hugo一般是在自己电脑上运行生成网页文件；而notionnext则是已经写好程序和网页，可以在云端进行实时的信息获取、生成网页内容并运行。</p>
<p>因此hugo需要在本地生成静态网页文件后，还需要将这些放在一个web服务器上才能将博客搭建起来，<strong>无论什么修改都需要进行生成“网页文件-将文件推送到web服务器这么一个流程”</strong>；notionnext则不需要这么麻烦，只需要写文章笔记即可，上述流程会由服务器自动完成。</p>
<h2 id="hugo部署">hugo部署</h2>
<p>hugo比起notionnext要“干净”，是不含主题文件的，需要额外下载。</p>
<h3 id="hugo本体">hugo本体</h3>
<p>hugo比起notionnext要“干净”，本体只是一个由命令行操控的静态网页生成器。</p>
<p>来到hugo的<a href="https://github.com/gohugoio/hugo/releases">github</a>，选择一个符合<strong>本地系统</strong>的包下载。</p>
<p><strong>注意，一定要是本地系统，不是服务器。如果是Windows就下载Windows，Linux就下载Linux。除非搭建、写好博客、生成网页这几个环节不出错且不需要预览，否则务必请下载适合本地系统运行的程序，不然会出现“顺利生成预览网站但就是进不去，网站无法连接”的情况。我在这里撞墙了好久才弄明白，hugo生成的预览静态网站，默认使用的域名是<code>localhost</code>。因此必须要使用本地系统来运行hugo。这就是我碰到的第一个大坑，害我白白浪费一小时。</strong></p>
<p>进入到hugo程序所在的文件，生成一个新的站点：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>hugo new site blog
</span></span></code></pre></div><p>hugo程序所在的文件夹会就地生成一个blog文件夹，也就是hugo项目的根目录。将hugo的程序复制一份到blog文件夹中，后续的操作全部都在blog文件夹中。</p>
<h3 id="hugo主题">hugo主题</h3>
<p>我们可以来到<a href="https://themes.gohugo.io/">Hugo Themes</a>中下载一个喜欢的主题。我目前使用的是<a href="https://themes.gohugo.io/themes/github-style/">Github Style</a>风格。</p>
<p><img src="/images/%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E8%AE%B0%E5%BD%95/20250926221207.png" alt=""></p>
<p>因此就用这个主题作为演示，想要部署其他主题的用户可以结合作者教程去部署。</p>
<p>到 blog/themes 中下载主题文件。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>git clone https://github.com/MeiK2333/github-style.git
</span></span></code></pre></div><h3 id="编辑hugo配置">编辑hugo配置</h3>
<p>基本每个hugo主题都会自带一个预设<strong>hugo.toml</strong>，可以根据自身需求去配置hug。<a href="https://themes.gohugo.io/themes/github-style/">Github Style</a>则是<strong>themes/github-style/config.template.toml</strong>。将其复制到项目根目录并重命名为hugo.toml。</p>
<p>个人使用快速启动配置：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">baseURL</span> = <span style="color:#e6db74">&#34;your blog domain&#34;</span> <span style="color:#75715e"># 博客地址，填入后续搭建真实的地址</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">languageCode</span> = <span style="color:#e6db74">&#34;zh-cn&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">title</span> = <span style="color:#e6db74">&#34;your blog name&#34;</span> <span style="color:#75715e"># 博客名称</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">theme</span> = <span style="color:#e6db74">&#34;github-style&#34;</span> <span style="color:#75715e"># 博客选择，默认不动</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">pygmentsCodeFences</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 代码区域高亮 </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">pygmentsUseClasses</span> = <span style="color:#66d9ef">false</span> <span style="color:#75715e"># true：使用css来配置代码高亮；false：使用内联样式配置代码高亮。需要 pygmentsCodeFences 为 true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>] <span style="color:#75715e"># 博客主页个人介绍以及个性化配置</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">author</span> = <span style="color:#e6db74">&#34;author&#34;</span> <span style="color:#75715e"># 作者</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">description</span> = <span style="color:#e6db74">&#34;personal description&#34;</span> <span style="color:#75715e"># 个人描述</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">github</span> = <span style="color:#e6db74">&#34;your github&#34;</span> <span style="color:#75715e"># 个人github账户名</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">twitter</span> = <span style="color:#e6db74">&#34;your twitter&#34;</span> <span style="color:#75715e"># 个人推特账户名</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">email</span> = <span style="color:#e6db74">&#34;your email&#34;</span> <span style="color:#75715e"># 个人邮箱</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">facebook</span> = <span style="color:#e6db74">&#34;your facebook&#34;</span> <span style="color:#75715e"># 个人脸书</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">linkedin</span> = <span style="color:#e6db74">&#34;your linkedin&#34;</span> <span style="color:#75715e"># 个人领英</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">instagram</span> = <span style="color:#e6db74">&#34;your instagram&#34;</span> <span style="color:#75715e"># 个人instagram</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tumblr</span> = <span style="color:#e6db74">&#34;your tumblr&#34;</span> <span style="color:#75715e"># 个人tumblr主页</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">url</span> = <span style="color:#e6db74">&#34;domain&#34;</span> <span style="color:#75715e"># 个人主页，建议放入 baseURL 相同的链接</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">keywords</span> = <span style="color:#e6db74">&#34;blog, google analytics&#34;</span> <span style="color:#75715e"># SEO搜索引擎关键词，可注释</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rss</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># rss订阅</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">lastmod</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 处理文章生成时间</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">favicon</span> = <span style="color:#e6db74">&#34;/images/github-mark.png&#34;</span> <span style="color:#75715e"># 网站图标，即浏览器</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">avatar</span> = <span style="color:#e6db74">&#34;/images/avatar.png&#34;</span> <span style="color:#75715e"># 个人头像</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">headerIcon</span> = <span style="color:#e6db74">&#34;/images/github-mark-white.png&#34;</span> <span style="color:#75715e"># 网站抬头</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">location</span> = <span style="color:#e6db74">&#34;China&#34;</span> <span style="color:#75715e"># 地区</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">userStatusEmoji</span> = <span style="color:#e6db74">&#34;🤣&#34;</span> <span style="color:#75715e"># 头像旁边的emoji</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enableGitalk</span> = <span style="color:#66d9ef">false</span> <span style="color:#75715e"># gitalk评论功能关闭</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enableSearch</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 搜索功能启用</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">outputs</span>] <span style="color:#75715e"># 本地搜索相关配置</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">home</span> = [<span style="color:#e6db74">&#34;html&#34;</span>, <span style="color:#e6db74">&#34;json&#34;</span>]
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">outputFormats</span>.<span style="color:#a6e22e">json</span>] <span style="color:#75715e"># 本地搜索相关配置</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">mediaType</span> = <span style="color:#e6db74">&#34;application/json&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">baseName</span> = <span style="color:#e6db74">&#34;index&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">isPlainText</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">gitalk</span>] <span style="color:#75715e"># gitalk相关配置，需要将 enableGitalk 设置为 true</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">clientID</span> = <span style="color:#e6db74">&#34;client ID&#34;</span> <span style="color:#75715e"># Your client ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">clientSecret</span> = <span style="color:#e6db74">&#34;client secret&#34;</span> <span style="color:#75715e"># Your client secret</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">repo</span> = <span style="color:#e6db74">&#34;Repository name&#34;</span> <span style="color:#75715e"># 博客的github地址Repository name，即仓库名。用于生成作用于评论的issue</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">owner</span> = <span style="color:#e6db74">&#34;your github&#34;</span> <span style="color:#75715e"># 您的GitHub ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">admin</span> = <span style="color:#e6db74">&#34;your github&#34;</span> <span style="color:#75715e"># 您的GitHub ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">id</span> = <span style="color:#e6db74">&#34;location.pathname&#34;</span> <span style="color:#75715e"># 文章页面的链接地址就是ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labels</span> = <span style="color:#e6db74">&#34;gitalk&#34;</span> <span style="color:#75715e"># Github issue labels. </span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">perPage</span> = <span style="color:#ae81ff">100</span> <span style="color:#75715e"># 可评论数量，最大为100</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pagerDirection</span> = <span style="color:#e6db74">&#34;last&#34;</span> <span style="color:#75715e"># 时间倒序来排列评论</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">createIssueManually</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 设置为true，如果是管理员登录，会自动创建issue，如果是false，需要管理员手动添加第一个评论(issue)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distractionFreeMode</span> = <span style="color:#66d9ef">false</span> <span style="color:#75715e"># 如果启用，则输入 (cmd|ctrl + enter) 可以快速回复</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">proxy</span> = <span style="color:#e6db74">&#34;https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token&#34;</span> <span style="color:#75715e"># 为不方便登录github的读者通过反向代理，可自行搭建</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">frontmatter</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">lastmod</span> = [<span style="color:#e6db74">&#34;lastmod&#34;</span>, <span style="color:#e6db74">&#34;:fileModTime&#34;</span>, <span style="color:#e6db74">&#34;:default&#34;</span>] <span style="color:#75715e"># 文章时间处理配置</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">services</span>]
</span></span><span style="display:flex;"><span>  [<span style="color:#a6e22e">services</span>.<span style="color:#a6e22e">googleAnalytics</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">ID</span> = <span style="color:#e6db74">&#34;UA-123456-789&#34;</span> <span style="color:#75715e"># googleAnalytics id</span>
</span></span></code></pre></div><p><code>favicon</code>、<code>avatar</code>、<code>headerIcon</code>需要放在themes/github-style/static/images中，并在hugo.toml改成相对应的文件名。需要注意，图像需要为像素为100整数倍的正方形图像，例如300×300、700×700。</p>
<p>写完hugo.toml后，在项目根目录进入cmd，然后输入<code>hugo server -D</code>，浏览器访问<strong>http：//localhost:1313</strong>便可进入到hugo生成的预览网站，针对hugo做出的任何修改都可以得到实时的反馈。</p>
<p>到content文件夹中新建一个<strong>readme.md</strong>，这边便是个人详细介绍，可以随意填写，比如写上自己的各种主页</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span><span style="color:#75715e">### Links
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> bilibili：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> github：
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">-</span> email：
</span></span></code></pre></div><h3 id="hugo博客发布">hugo博客发布</h3>
<p>前文也已经写了，<strong>hugo本质上是一个静态网页生成器</strong>，我们需要将它生成的<strong>静态网站文件</strong>发布到类似<a href="https://nginx.org">nginx</a>之类的web服务器或者诸如<a href="https://pages.github.com">github page</a>之类的网站托管平台上。个人还是推荐优先选择github page，对于日后回档、备份等非常方便，<del>它已经救了我好几次了。</del></p>
<p>在项目根目录进入cmd，输入<code>hugo</code>，便可以在<code>public</code>文件夹中找到编译好的网站文件。直接全部上传到web服务器或者网页托管平台即可成发布。</p>
<p>如果发布后出现css丢失而本地预览时一切正常，即成功发布的网站上只有文字没有样式，大概率是hugo.toml中的<code>baseURL</code>写错了，需要写上博客真实的地址。修改完成后再重新编译、上传发布。</p>
<hr>
<h1 id="博客文章的编写">博客文章的编写</h1>
<p>编写之前需要进行文章的预设进行修改。可以根据<strong>themes/archetypes/default.md</strong>修改<strong>archetypes/default.md</strong>里面的内容。</p>
<p>由于个人使用的是<a href="https://obsidian.md">obsidian</a>进行markdown的编写，使用yaml语法写的预设放在obsidian正好就是<strong>笔记属性</strong>模块，因此我更喜欢写成这样：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-markdown" data-lang="markdown"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>date: {{ .Date }}
</span></span><span style="display:flex;"><span>draft: true
</span></span><span style="display:flex;"><span>title: {{ replace .File.ContentBaseName &#34;-&#34; &#34; &#34; | title }}
</span></span><span style="display:flex;"><span>summary:
</span></span><span style="display:flex;"><span>tags:
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><p><code>draft</code>为<code>true</code>是，文章处于草稿状态，不会在网站中显示。</p>
<p>在项目根目录进入cmd，输入</p>
<pre tabindex="0"><code>hugo new post/&lt;文件名称&gt;.md
</code></pre><p>在content/post便会生成一个带着预设的markdown文件，需要在这个文件上进行博客文章的撰写。使用hugo生成静态网站文件前也需要将博客文章放入到该文件夹中。</p>
<h2 id="图片附件的引用">图片附件的引用</h2>
<h3 id="图片附件的文件存放">图片附件的文件存放</h3>
<p>如果跟我一样是使用obsidian进行markdown编辑，那么需要进行一番设置，不然就会跟我一样掉入到<strong>第二个大坑</strong>。</p>
<p>obsidian对于图片等附件，默认的做法是直接塞到仓库的根目录下；而hugo则需要将引用的图片放到项目的 <strong>static/images</strong> 目录下，这与Obsidian的默认存放方式不同，直接迁移会不方便。</p>
<p>而且obsidian对图片应用默认使用它所谓的<strong>WIKI链接</strong>，即<code>![[图片名]]</code>的格式，而不是markdown中标准的url <code>![]()</code> 格式，而hugo则不认WIKI链接格式。</p>
<p>综上所诉，使用obsidian写文章时需要进行一些设置：</p>
<ol>
<li>点击左下角齿轮图标进入，选择“文件与链接”，将”内部链接类型“改为”基于当前笔记的相对路径“。</li>
<li>关闭”使用WIKI链接“。</li>
<li>”附件默认存放路径“改为”指定的附件文件夹“，并将”附件文件夹路径“写入<code>images</code>。</li>
</ol>
<p>这样，所有图片都会进入到obsidian中的images文件夹中，后续挪动图片到hugo时，只需要将images文件夹放入到hugo项目中的static文件夹即可。</p>
<p>如果觉得所有的博客的图片都放在一个文件夹中还是显得混乱，那么可以选择安装obsidian的<strong>Custom Attachment Location</strong>插件。它能够接管所有的markdown文件关于附件重命名、存放位置并实时编写markdown url格式，且提供相当的自定义功能。</p>
<p>我个人对于图片附件的存放预期是在images文件夹中建立一个跟markdown笔记同名的文件夹，该笔记的图片附件通通放入其中，并根据放入时间进行重命名。因此我的对Custom Attachment Location进行了如下配置：</p>
<ul>
<li>”新附件位置“写入<code>./images/${noteFileName}</code>。</li>
<li>”生成的附件文件名“写入<code>${date:YYYYMMDDHHmmss}</code>。</li>
<li>”markdown url格式“写入<code>images/${noteFileName}/${originalAttachmentFileName}.${originalAttachmentFileExtension}</code>。</li>
<li>”附加重命名模式“改为”全部“。</li>
</ul>
<p>这样设置后，图片和其他附件会存储在obsidian仓库的根目录/images/&lt;文章笔记同名文件夹&gt;，而且会根据时间来重命名所有附件。</p>
<h3 id="图片附件引用的url格式修改">图片附件引用的url格式修改</h3>
<p>如果此时兴冲冲的就运行hugo预览网站，那么大概率的结果是——文章的图片无法正常引用。而这，也是我碰到的第三个大坑。</p>
<p>经过大半天的研究，我意识到还是hugo本质是一个静态网站生成器的问题~~（貌似我踩的每一个坑在某种程度上都是因为这个原因）~~。它的一个功能是将markdown文件转换成静态网站所需的<strong>html文件</strong>，因此生成的博客文件对于图片的链接是：<strong>https://&lt;博客域名&gt;image/&lt;图片&gt;</strong>，而正确的链接格式应为：<strong>https://&lt;博客域名&gt;/images/&lt;图片&gt;</strong>。问题在于原链接在 <strong>images</strong> 前少了一个斜杠<code>/</code>。</p>
<p>现在需要做的事情就很明显了：在所有的markdown中，图片的引用链接从<code>![](/images/xxx)</code>改为<code>![](/images/xxx)</code>。不过一个一个的改也显得太费人工了，对付这种有着明显特征的重复性劳动，python脚本显然是一个更好的选择。我们只需要将<code>![](/images/</code>改为<code>![](/images/</code>即可。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">precise_replace</span>():
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;开始精确替换图片路径...&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;处理目录: </span><span style="color:#e6db74">{</span>os<span style="color:#f92672">.</span>getcwd()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    print()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    file_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    total_replacements <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> root, dirs, files <span style="color:#f92672">in</span> os<span style="color:#f92672">.</span>walk(<span style="color:#e6db74">&#39;.&#39;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> file <span style="color:#f92672">in</span> files:
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> file<span style="color:#f92672">.</span>endswith(<span style="color:#e6db74">&#39;.md&#39;</span>):
</span></span><span style="display:flex;"><span>                file_path <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(root, file)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">with</span> open(file_path, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>, errors<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;ignore&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>                        content <span style="color:#f92672">=</span> f<span style="color:#f92672">.</span>read()
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#75715e"># 精确替换：只替换 ![](/images/ 为 ![](/images/</span>
</span></span><span style="display:flex;"><span>                    old_pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;![](/images/&#39;</span>
</span></span><span style="display:flex;"><span>                    new_pattern <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;![](/images/&#39;</span>
</span></span><span style="display:flex;"><span>                    
</span></span><span style="display:flex;"><span>                    <span style="color:#66d9ef">if</span> old_pattern <span style="color:#f92672">in</span> content:
</span></span><span style="display:flex;"><span>                        new_content <span style="color:#f92672">=</span> content<span style="color:#f92672">.</span>replace(old_pattern, new_pattern)
</span></span><span style="display:flex;"><span>                        
</span></span><span style="display:flex;"><span>                        <span style="color:#66d9ef">if</span> content <span style="color:#f92672">!=</span> new_content:
</span></span><span style="display:flex;"><span>                            <span style="color:#75715e"># 计算替换次数</span>
</span></span><span style="display:flex;"><span>                            replacements <span style="color:#f92672">=</span> content<span style="color:#f92672">.</span>count(old_pattern) <span style="color:#f92672">-</span> new_content<span style="color:#f92672">.</span>count(old_pattern)
</span></span><span style="display:flex;"><span>                            
</span></span><span style="display:flex;"><span>                            <span style="color:#75715e"># 直接保存，不备份</span>
</span></span><span style="display:flex;"><span>                            <span style="color:#66d9ef">with</span> open(file_path, <span style="color:#e6db74">&#39;w&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> f:
</span></span><span style="display:flex;"><span>                                f<span style="color:#f92672">.</span>write(new_content)
</span></span><span style="display:flex;"><span>                            
</span></span><span style="display:flex;"><span>                            total_replacements <span style="color:#f92672">+=</span> replacements
</span></span><span style="display:flex;"><span>                            file_count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;✓ 已处理: </span><span style="color:#e6db74">{</span>file<span style="color:#e6db74">}</span><span style="color:#e6db74"> (</span><span style="color:#e6db74">{</span>replacements<span style="color:#e6db74">}</span><span style="color:#e6db74"> 次替换)&#34;</span>)
</span></span><span style="display:flex;"><span>                
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>                    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;✗ 处理文件失败: </span><span style="color:#e6db74">{</span>file<span style="color:#e6db74">}</span><span style="color:#e6db74"> - </span><span style="color:#e6db74">{</span>str(e)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    print()
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">&#34;处理完成!&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;共处理了 </span><span style="color:#e6db74">{</span>file_count<span style="color:#e6db74">}</span><span style="color:#e6db74"> 个文件&#34;</span>)
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;总共进行了 </span><span style="color:#e6db74">{</span>total_replacements<span style="color:#e6db74">}</span><span style="color:#e6db74"> 次替换&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> total_replacements <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">提示: 没有进行任何替换，可能是因为:&#34;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;1. 文件中没有找到 &#39;![](/images/&#39; 这样的模式&#34;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;2. 文件编码问题&#34;</span>)
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;3. 图片链接已经是指定格式&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    input(<span style="color:#e6db74">&#34;按回车键退出...&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    precise_replace()
</span></span></code></pre></div><p>上述脚本需要放在content文件夹中，每次修改了博客文章都需要运行一次，它会自动检测修改content及其子文件夹中的markdown文件。</p>
<h3 id="notionnext博客迁移">notionnext博客迁移</h3>
<p>notionnext对笔记的格式跟hugo非常类似，基本上导出就可以直接放到obsidian正常读取。但notionnext导出的笔记里内容会带一个标题和笔记属性。先要将多余的笔记属性和标题删除可以使用下面这个python脚本：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> glob
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_markdown_files</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    处理当前目录及子目录下所有.md文件
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 获取当前目录</span>
</span></span><span style="display:flex;"><span>    current_dir <span style="color:#f92672">=</span> os<span style="color:#f92672">.</span>getcwd()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 查找所有.md文件（包括子目录）</span>
</span></span><span style="display:flex;"><span>    md_files <span style="color:#f92672">=</span> glob<span style="color:#f92672">.</span>glob(os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>join(current_dir, <span style="color:#e6db74">&#34;**&#34;</span>, <span style="color:#e6db74">&#34;*.md&#34;</span>), recursive<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 定义需要删除的关键字</span>
</span></span><span style="display:flex;"><span>    keywords <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;type&#39;</span>, <span style="color:#e6db74">&#39;status&#39;</span>, <span style="color:#e6db74">&#39;slug&#39;</span>, <span style="color:#e6db74">&#39;summary&#39;</span>, <span style="color:#e6db74">&#39;tags&#39;</span>, <span style="color:#e6db74">&#39;category&#39;</span>]
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    processed_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> file_path <span style="color:#f92672">in</span> md_files:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">try</span>:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># 读取文件内容</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">with</span> open(file_path, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> file:
</span></span><span style="display:flex;"><span>                lines <span style="color:#f92672">=</span> file<span style="color:#f92672">.</span>readlines()
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># 如果文件行数不足，跳过处理</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> len(lines) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">3</span>:
</span></span><span style="display:flex;"><span>                print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;跳过文件 </span><span style="color:#e6db74">{</span>file_path<span style="color:#e6db74">}</span><span style="color:#e6db74">，行数不足&#34;</span>)
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">continue</span>
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># ① 删除第一行和第二行</span>
</span></span><span style="display:flex;"><span>            lines <span style="color:#f92672">=</span> lines[<span style="color:#ae81ff">2</span>:]
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># ② 检查新的前6行（原文件的第3-8行），删除包含关键字的行</span>
</span></span><span style="display:flex;"><span>            lines_to_check <span style="color:#f92672">=</span> min(<span style="color:#ae81ff">6</span>, len(lines))  <span style="color:#75715e"># 确保不超过文件行数</span>
</span></span><span style="display:flex;"><span>            indices_to_remove <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(lines_to_check):
</span></span><span style="display:flex;"><span>                line <span style="color:#f92672">=</span> lines[i]<span style="color:#f92672">.</span>strip()  <span style="color:#75715e"># 去除首尾空白字符</span>
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># 检查行开头是否包含关键字（忽略大小写）</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">if</span> any(line<span style="color:#f92672">.</span>lower()<span style="color:#f92672">.</span>startswith(keyword) <span style="color:#66d9ef">for</span> keyword <span style="color:#f92672">in</span> keywords):
</span></span><span style="display:flex;"><span>                    indices_to_remove<span style="color:#f92672">.</span>append(i)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># 从后往前删除，避免索引变化问题</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">for</span> index <span style="color:#f92672">in</span> sorted(indices_to_remove, reverse<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>):
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">del</span> lines[index]
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># ③ 再删除一行（新的第一行）</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> len(lines) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>                lines <span style="color:#f92672">=</span> lines[<span style="color:#ae81ff">1</span>:]
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># 写回文件</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">with</span> open(file_path, <span style="color:#e6db74">&#39;w&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>) <span style="color:#66d9ef">as</span> file:
</span></span><span style="display:flex;"><span>                file<span style="color:#f92672">.</span>writelines(lines)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>            processed_count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;已处理文件: </span><span style="color:#e6db74">{</span>file_path<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>            
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
</span></span><span style="display:flex;"><span>            print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;处理文件 </span><span style="color:#e6db74">{</span>file_path<span style="color:#e6db74">}</span><span style="color:#e6db74"> 时出错: </span><span style="color:#e6db74">{</span>str(e)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">处理完成！共处理了 </span><span style="color:#e6db74">{</span>processed_count<span style="color:#e6db74">}</span><span style="color:#e6db74"> 个.md文件&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> __name__ <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;__main__&#34;</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># 确认操作</span>
</span></span><span style="display:flex;"><span>    confirm <span style="color:#f92672">=</span> input(<span style="color:#e6db74">&#34;此脚本将修改当前目录及子目录下所有.md文件。确认执行？(y/n): &#34;</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> confirm<span style="color:#f92672">.</span>lower() <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;y&#39;</span>, <span style="color:#e6db74">&#39;yes&#39;</span>, <span style="color:#e6db74">&#39;是&#39;</span>]:
</span></span><span style="display:flex;"><span>        process_markdown_files()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">&#34;操作已取消&#34;</span>)
</span></span></code></pre></div><hr>
<h1 id="gitalk评论的启用">gitalk评论的启用</h1>
<p><strong>gitalk</strong>是一个借助github issue开发评论的组件。它会在指定的仓库内发布issue，通过issue的标签<strong>Labels</strong>来对每一篇博客进行关联，一个issue都对应一篇博客的评论区。优点是方便简单，只需要一个github账号便可启用。</p>
<p>首先需要新建一个OAuth Apps，在&quot;Homepage URL&quot;和&quot;Authorization callback URL&quot;都填入<strong>博客的地址</strong>。建立完毕后就可以获得<strong>clientID</strong>，然后生成一个<strong>clientSecret</strong>。</p>
<p>然后新建一个仓库用于issue的存放，之后所有的评论都会放在该仓库的issue中。</p>
<p>回到hugo.toml中进行编辑：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">enableGitalk</span> = <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">gitalk</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">clientID</span> = <span style="color:#e6db74">&#34;刚刚获取的clientID&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">clientSecret</span> = <span style="color:#e6db74">&#34;刚刚获取的clientSecret&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">repo</span> = <span style="color:#e6db74">&#34;刚刚新建的仓库名&#34;</span> <span style="color:#75715e"># 不需要带用户名，只要仓库名称即可。</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">owner</span> = <span style="color:#e6db74">&#34;your github&#34;</span> <span style="color:#75715e"># 您的GitHub ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">admin</span> = <span style="color:#e6db74">&#34;your github&#34;</span> <span style="color:#75715e"># 您的GitHub ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">id</span> = <span style="color:#e6db74">&#34;location.pathname&#34;</span> <span style="color:#75715e"># 文章页面的链接地址就是ID</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">labels</span> = <span style="color:#e6db74">&#34;gitalk&#34;</span> <span style="color:#75715e"># Github issue labels. </span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">perPage</span> = <span style="color:#ae81ff">100</span> <span style="color:#75715e"># 可评论数量，最大为100</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">pagerDirection</span> = <span style="color:#e6db74">&#34;last&#34;</span> <span style="color:#75715e"># 时间倒序来排列评论</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">createIssueManually</span> = <span style="color:#66d9ef">true</span> <span style="color:#75715e"># 设置为true，如果是管理员登录，会自动创建issue，如果是false，需要管理员手动添加第一个评论(issue)</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">distractionFreeMode</span> = <span style="color:#66d9ef">false</span> <span style="color:#75715e"># 如果启用，则输入 (cmd|ctrl + enter) 可以快速回复</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e"># proxy = &#34;https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token&#34; # 为不方便登录github的读者通过反向代理，可自行搭建</span>
</span></span></code></pre></div><p>而这个时候，熟悉的大坑时间又来了，算算这是第四个大坑了~~（大坑好多）~~。我的gitalk显示<strong>Error: Validation Failed</strong>报错，也就是未找到可关联的issue。</p>
<p>造成这个报错是由好几个因素叠加造成的：</p>
<ul>
<li>gitalk在关联issue和文章的时候，会自动生成两个Labels并打上相关的issue，一个是上面设置的<code>labels = &quot;gitalk&quot;</code>，一个是直接将博客文章的网址放入到Labels中。</li>
<li>Labels命名的限制是<strong>50个字符</strong>。</li>
<li>hugo生成博客文章网址的时候，是根据文章所在的markdown文件名称来生成的。</li>
</ul>
<p>由于这三个因素叠加，文章所在的markdown文件名称所在的文件名称是<strong>中文</strong>时，实际的生成的网址会非常长，很容易就突破50个字符的大关。这边是这次报错的由来。</p>
<p>GitHub的Labels有50个字符的长度限制，是固定死的。我们所能做的就只能是缩短字符数量。这里就有两个缩短字符的思路：</p>
<ul>
<li>将markdown文件改为较为简短的英文，</li>
<li>寻找其他字符串作为关联不同文章的Labels名称，这个字符串是需要唯一的。</li>
</ul>
<p>前者好说，改文件名就行，但这种方式不方便obsidian笔记和博客文章的相互对照。因此我选择第二个方式，而字符串的方式选择<strong>md5哈希</strong></p>
<p>md5哈希作为gitalk绕过labels限制的办法其实很早就有，这里就直接给出成品。需要编辑themes/github-style/layouts/partials/gitalk.html</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>{{ if .Site.Params.enableGitalk }}
</span></span><span style="display:flex;"><span>{{/* 检查是否启用了Gitalk评论系统 */}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gitalk-container&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;gitalk-container&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>{{/* Gitalk评论容器，评论将渲染在这个div中 */}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- 引入MD5库 --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{{/* 引入MD5加密库，用于生成固定长度的页面ID */}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{{ &#34;css/gitalk.css&#34; | absURL }}&#39;</span>&gt;
</span></span><span style="display:flex;"><span>{{/* 引入Gitalk样式文件 */}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;{{ &#34;js/gitalk.min.js&#34; | absURL }}&#39;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>{{/* 引入Gitalk主脚本文件 */}}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 获取当前页面的路径（不包含域名）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pageUrl</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">pathname</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 对页面路径进行MD5哈希，生成固定长度的唯一ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// 解决GitHub标签50字符长度限制的问题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">hashId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">md5</span>(<span style="color:#a6e22e">pageUrl</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 初始化Gitalk评论系统
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">gitalk</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Gitalk</span>({
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">clientID</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;{{ .Site.Params.gitalk.clientID }}&#39;</span>,    <span style="color:#75715e">// GitHub OAuth应用的Client ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">clientSecret</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;{{ .Site.Params.gitalk.clientSecret }}&#39;</span>, <span style="color:#75715e">// GitHub OAuth应用的Client Secret
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">repo</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;{{ .Site.Params.gitalk.repo }}&#39;</span>,            <span style="color:#75715e">// 存放评论的GitHub仓库名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">owner</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;{{ .Site.Params.gitalk.owner }}&#39;</span>,          <span style="color:#75715e">// GitHub仓库所有者用户名
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">admin</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;{{ .Site.Params.gitalk.owner }}&#39;</span>],        <span style="color:#75715e">// 管理员用户名列表（可自动创建Issue）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">id</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">hashId</span>,                                        <span style="color:#75715e">// 页面唯一标识符（使用MD5哈希值）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;{{ .Title }}&#39;</span> <span style="color:#f92672">||</span> document.<span style="color:#a6e22e">title</span>,           <span style="color:#75715e">// Issue标题，使用文章标题或页面标题
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">distractionFreeMode</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">false</span>                         <span style="color:#75715e">// 禁用无干扰模式（允许使用快捷键提交）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  });
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 立即执行函数，用于渲染Gitalk评论框
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  (<span style="color:#66d9ef">function</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 检查是否在本地开发环境（localhost或127.0.0.1）
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> ([<span style="color:#e6db74">&#34;localhost&#34;</span>, <span style="color:#e6db74">&#34;127.0.0.1&#34;</span>].<span style="color:#a6e22e">indexOf</span>(window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">hostname</span>) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// 本地环境不渲染Gitalk，显示提示信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>      document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;gitalk-container&#39;</span>).<span style="color:#a6e22e">innerHTML</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Gitalk评论在本地预览时默认不显示。&#39;</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 在生产环境中渲染Gitalk评论框
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">gitalk</span>.<span style="color:#a6e22e">render</span>(<span style="color:#e6db74">&#39;gitalk-container&#39;</span>);
</span></span><span style="display:flex;"><span>  })();
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>{{ end }}
</span></span><span style="display:flex;"><span>{{/* 结束Gitalk启用条件判断 */}}
</span></span></code></pre></div><p>还需要编辑hugo.tom，将<code>id = &quot;location.pathname&quot;</code>注释掉</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#75715e"># id = &#34;location.pathname&#34;</span>
</span></span></code></pre></div><p>现在重新部署，gitalk应该就恢复正常了。</p>
<h1 id="代码块高亮">代码块高亮</h1>
<p>第五个坑，便是<strong>代码高亮</strong>。由于代码块背景一直是黑色的，跟github那种浅灰的风格非常不搭配，索性重新加载了一个css文件来更改代码块的背景颜色。</p>
<p>需要到themes/github-style/static/css中新建一个<strong>custom.css</strong>，并写入代码块背景的样式</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#75715e">/* 专门针对代码块的背景色 */</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">pre</span><span style="color:#f92672">,</span> <span style="color:#f92672">code</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">highlight</span><span style="color:#f92672">,</span> .<span style="color:#a6e22e">chroma</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">background-color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">color</span><span style="color:#f92672">-</span>canvas<span style="color:#f92672">-</span>subtle, <span style="color:#ae81ff">#f6f8fa</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* 使用CSS变量，如果变量不存在则回退到#f6f8fa */</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/* 确保代码块文字颜色也是深色 */</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">pre</span><span style="color:#f92672">,</span> <span style="color:#f92672">code</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span><span style="color:#66d9ef">color</span><span style="color:#f92672">-</span>fg<span style="color:#f92672">-</span><span style="color:#66d9ef">default</span>, <span style="color:#ae81ff">#24292f</span>) <span style="color:#75715e">!important</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>回到hugo.toml，设置加载custom.css</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-toml" data-lang="toml"><span style="display:flex;"><span><span style="color:#a6e22e">pygmentsUseClasses</span> = <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#a6e22e">params</span>]
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">custom_css</span> = [<span style="color:#e6db74">&#34;css/light.css&#34;</span>, <span style="color:#e6db74">&#34;css/custom.css&#34;</span>]
</span></span></code></pre></div><p>重新部署后代码块应该就会变成github的浅灰色风格了。</p>
<hr>
<h1 id="尾声">尾声</h1>
<p>在吃下这么多坑之后，也是终于将博客调教成自己想要的模样了，<del>真是一场酣畅淋漓的大战啊</del>。</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script type="application/javascript" src='https://cyilin36.github.io/js/toc.js'></script>
<link rel="stylesheet" href='https://cyilin36.github.io/css/toc.css' />

  
<div id="gitalk-container" class="gitalk-container"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.19.0/js/md5.min.js"></script>
<link rel="stylesheet" href='https://cyilin36.github.io/css/gitalk.css'>
<script src='https://cyilin36.github.io/js/gitalk.min.js'></script>
<script>
  var pageUrl = window.location.pathname;
  var hashId = md5(pageUrl);
  
  const gitalk = new Gitalk({
    clientID: 'Ov23liQKtrtwT2Ax2000',    
    clientSecret: '77542d944ee38787b154727e269a2417718b7a90', 
    repo: 'cyilin36.github.io',            
    owner: 'cyilin36',          
    admin: ['cyilin36'],        
    id: hashId,
    title: '博客迁移记录' || document.title,
    distractionFreeMode: false
  });
  
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk评论在本地预览时默认不显示。';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://cyilin36.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://cyilin36.github.io/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://cyilin36.github.io/js/search.js'></script>



</html>